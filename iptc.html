<!DOCTYPE html>
<!--
Hello i'm Phil Boivin! 
-->
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>IPTC | Philippe Boivin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="https://www.philboivin.com/img/philboivin-og.jpg" />
  <link rel="icon" type="image/png" href="img/icon.png">
  <link href="/css/style.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
</head>

<body>

  <main>
    <div id="content">

      <nav id="main-menu">
        <div id="menuToggle">
          <input type="checkbox" />
          <span></span>
          <span></span>
          <span></span>
          <ul id="menu-items"></ul>
        </div>
      </nav>

    <div class="row">
      <div class="col">
        
        <h1>IPTC</h1>

        <div class="row">
          <div class="col">

            <div id="displayPhoto"></div>
            <div id="meta"></div>
           
          </div>
        </div>

      </div>

    </div>


  </div> 
</main>
  
<footer></footer>




<script> 
  $(function(){
    $("#menu-items").load("/inc/menu.html"); 
    $("footer").load("/inc/footer.html");
  });
</script> 

<script>

// Load and display photo
const urlSearchParams = new URLSearchParams(window.location.search);
const params = Object.fromEntries(urlSearchParams.entries());
var img = params.img;
displayPhoto.innerHTML = '<img src="'+img+'" id="photo">';

// Get the meta data from the photo
// ref : https://github.com/exif-js/exif-js/blob/master/exif.js 
window.onload=getExif;

function getExif() {
    // var img1 = document.getElementById("img1");
    // EXIF.getData(img1, function() {
    //     var make = EXIF.getTag(this, "Make");
    //     var model = EXIF.getTag(this, "Model");
    //     var makeAndModel = document.getElementById("makeAndModel");
    //     makeAndModel.innerHTML = `${make} ${model}`;
    // });

  
  var photo = document.getElementById("photo");

  EXIF.getData(photo, function() {
    
    //var allMetaData = EXIF.getAllIptcTags(this);
    var headline = EXIF.getIptcTag(this, "headline");
    var credit = EXIF.getIptcTag(this, "credit");
    var copyright = EXIF.getIptcTag(this, "copyright");
    
    // check if decoding (for French accents) is needed
    try {
      var validHeadline = decodeURIComponent(escape(headline));
    } catch(e) {
        validHeadline = headline;
    }
      
    var meta = document.getElementById("meta");
    //meta.innerHTML = JSON.stringify(allMetaData, null, "\t");
    meta.innerHTML = validHeadline + " Credit : " + credit + ". &copy; " + copyright +".";

     
    });


}
</script>


</body>
</html>
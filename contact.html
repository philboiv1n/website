<!DOCTYPE html>
<!--
Hello i'm Phil Boivin! 
-->
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Contact Phil Boivin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="img/icon.png">

  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <!-- custom stylesheet-->
  <link href="css/style.css" rel="stylesheet" type="text/css">

</head>



<body>

<div class="container">

<div id="topBar" class="topBar"></div>  
<div id="topRef"></div>

<header></header>

<main>
    

    <section id="content">

    <h1>Contact me</h1>
    <p>Feel free to send me a few lines!</p>

    <p> 
      <form id="contact-form" method="post">
      Name
      <input type="text" id="name-input" placeholder="Enter your name here" class="form-control"><br>
     <!--  <h4>Phone:</h4>
      <input type="phone" style="height:35px;" id="phone-input" placeholder="Enter phone number" class="form-control" style="width:100%;"/><br/> -->
      Email 
      <input type="email" id="email-input" placeholder="Enter your email here" class="form-control"><br>
      
      Message<br>
      <textarea id="message-input" rows="3" placeholder="Enter your message, question or comment here!" class="form-control"></textarea><br/>

      <!-- <div class="g-recaptcha" data-sitekey="6Lc7cVMUAAAAAM1yxf64wrmO8gvi8A1oQ_ead1ys" class="form-control" style="width:100%;"></div> -->
      
      <button type="button" onClick="submitToAPI(event)" class="btn btn-lg" >Submit</button>

      </form>
    </p>
    
   <div id="messages" class="error"></div>

   </section>

    
  
  </main>
  
  <footer></footer>

</div>
 
  <!-- load shared content -->
  <script> 
    $(function(){
      $("header").load("header.html"); 
      $("footer").load("footer.html"); 
    });
  </script> 


  <!-- header animation script -->
  <script src="js/header-anim.js"></script>


  <!-- Form validation and post -->
  <script>
    function submitToAPI(e) {
       e.preventDefault();
     
     //  var URL = "https://abc1234.execute-api.us-east-1.amazonaws.com/01/contact";

            var nameRegex = /[A-Za-z]{1}[A-Za-z]/;

            if (!nameRegex.test($("#name-input").val())) {
              $("#messages").html("Name should be at least 2 characters");
              return;
            }

            /*
            var mobilere = /[0-9]{10}/;
            if (!mobilere.test($("#phone-input").val())) {
                alert ("Please enter valid mobile number");
                return;
            }
            
            if ($("#email-input").val()=="") {
                alert ("Please enter your email");
                return;
            }
            */

            /* var reeamil = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,6})?$/; */

            var emailRegex = /^((([!#$%&'*+\-/=?^_`{|}~\w])|([!#$%&'*+\-/=?^_`{|}~\w][!#$%&'*+\-/=?^_`{|}~\.\w]{0,}[!#$%&'*+\-/=?^_`{|}~\w]))[@]\w+([-.]\w+)*\.\w+([-.]\w+)*)$/;

            if (!emailRegex.test($("#email-input").val())) {
                $("#messages").html("Please enter valid email address");
                return;
            }

       var name = $("#name-input").val();
       var email = $("#email-input").val();
       var message = $("#message-input").val();
       var data = {
          name : name,
          email : email,
          message : message
        };

       $.ajax({
         type: "POST",
         url : "https://039fqid0i9.execute-api.us-east-2.amazonaws.com/Prod",
         dataType: "json",
         crossDomain: "true",
         contentType: "application/json; charset=utf-8",
      //   data: JSON.stringify(data),
         data: data,

         success: function () {
            // clear form and show a success message 
            $("#messages").attr('class', 'success');
            $("#messages").html("Message sent! Thank you");
            document.getElementById("contact-form").reset();
            location.reload();
         },
         error: function () {
            // show an error message
            $("#messages").html("Sorry, there is a technical problem and we can't send your message. Please try again later.");
         }});
     }


  </script>
v.0.0.1
</body>
</html>
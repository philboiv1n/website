<!DOCTYPE html>
<!--
Hello i'm Phil Boivin! 
-->
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Contact Phil Boivin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="img/icon.png">

  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <!-- custom stylesheet-->
  <link href="css/style.css" rel="stylesheet" type="text/css">

</head>



<body>

<div class="container">

<div id="topBar" class="topBar"></div>  
<div id="topRef"></div>

<header></header>

<main>
    

    <section id="content">

    <h1>Contact me</h1>
    <p>Feel free to send me a few lines!</p>

    <p> 
      <form id="contact-form" method="post">
      <input type="text" id="name-input" placeholder="Your name" class="form-control" maxlength="64"><br>
      <input type="email" id="email-input" placeholder="Your email address" class="form-control" maxlength="320"><br>
      <textarea id="message-input" rows="6" placeholder="Enter your message, question or comment here!" class="form-control" maxlength="1024"></textarea>
      <br>
      <button type="button" onClick="submitToAPI(event)" class="form-submit">Submit</button>
      </form>
    </p>
    
   <div id="messages" class="error"></div>
   </section>

  
  </main>
  
  <footer></footer>

</div>
 
  <!-- load shared content -->
  <script> 
    $(function(){
      $("header").load("header.html"); 
      $("footer").load("footer.html"); 
    });
  </script> 


  <!-- header animation script -->
  <script src="js/header-anim.js"></script>


  <!-- Form validation and post -->
  <script>
    function submitToAPI(e) {
       e.preventDefault();
     
            var x = "<span class='redCircle'>x</span>&nbsp;&nbsp;";

            var nameRegex = /[A-Za-z]{1}[A-Za-z]/;

            if (!nameRegex.test($("#name-input").val())) {
              $("#messages").html(x+"Name should be at least 2 characters");
              return;
            }


            var emailRegex = /^((([!#$%&'*+\-/=?^_`{|}~\w])|([!#$%&'*+\-/=?^_`{|}~\w][!#$%&'*+\-/=?^_`{|}~\.\w]{0,}[!#$%&'*+\-/=?^_`{|}~\w]))[@]\w+([-.]\w+)*\.\w+([-.]\w+)*)$/;

            if (!emailRegex.test($("#email-input").val())) {
                $("#messages").html(x+"Please enter valid email address");
                return;
            }

            var msgRegex = /[A-Za-z]{3}[A-Za-z]/;

            if (!msgRegex.test($("#message-input").val())) {
              $("#messages").html(x+"Please enter a message");
              return;
            }

 
       var data = {
          name: $("#name-input").val(),
          email: $("#email-input").val(),
          message : $("#message-input").val()
        };

       $.ajax({
         type: 'POST',
         url : 'https://039fqid0i9.execute-api.us-east-2.amazonaws.com/Prod',
         dataType: 'json',
         crossDomain: 'true',
         contentType: 'application/json',
         data: JSON.stringify(data),
 
         success: function () {
            // clear form and show a success message 
            alert("Message sent! Thank you");
            document.getElementById("contact-form").reset();
            location.reload();
         },
         error: function () {
            // show an error messages
            $("#messages").html(x+"Sorry, there is a technical problem and we can't send your message. Please try again later.");
         }});
     }


  </script>
</body>
</html>